(function(t){function e(e){for(var r,i,s=e[0],l=e[1],c=e[2],u=0,d=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);h&&h(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(o.splice(e--,1),t=l(l.s=n[0]))}return t}var r={},i={app:0},a={app:0},o=[];function s(t){return l.p+"js/"+({about:"about"}[t]||t)+"."+{about:"b9434d64"}[t]+".js"}function l(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(t){var e=[],n={about:1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var r="css/"+({about:"about"}[t]||t)+"."+{about:"25466259"}[t]+".css",a=l.p+r,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var c=o[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===r||u===a))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],u=c.getAttribute("data-href");if(u===r||u===a)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var r=e&&e.target&&e.target.src||a,o=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete i[t],h.parentNode.removeChild(h),n(o)},h.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){i[t]=0})));var r=a[t];if(0!==r)if(r)e.push(r[2]);else{var o=new Promise((function(e,n){r=a[t]=[e,n]}));e.push(r[2]=o);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=s(t);var d=new Error;c=function(e){u.onerror=u.onload=null,clearTimeout(h);var n=a[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",d.name="ChunkLoadError",d.type=r,d.request=i,n[1](d)}a[t]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(e)},l.m=t,l.c=r,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)l.d(n,r,function(e){return t[e]}.bind(null,r));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var h=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"04e4":function(t,e,n){"use strict";n("4a33")},"4a33":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" | "),n("router-link",{attrs:{to:"/compare"}},[t._v("Compare")])],1),n("router-view")],1)},a=[],o=(n("5c0b"),n("2877")),s={},l=Object(o["a"])(s,i,a,!1,null,null,null),c=l.exports,u=n("5c96"),d=n.n(u);n("c69f");r["default"].use(d.a);n("d3b7");var h=n("8c4f"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"border",attrs:{id:"home"}},[n("el-row",[n("el-col",{attrs:{span:16}},[n("div",{staticStyle:{display:"flex"}},[n("div",{staticStyle:{"flex-grow":"1"}},[n("el-input",{model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),n("div",[n("el-button-group",[n("el-button",{attrs:{type:"primary"},on:{click:t.parseText}},[t._v("Analyze")]),n("el-button",{attrs:{type:"primary"},on:{click:t.WriteFile}},[t._v("Save")])],1)],1)])]),n("el-col",{attrs:{span:8}},[n("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",action:"https://jsonplaceholder.typicode.com/posts/","before-upload":t.uploadFile}},[n("div",{staticClass:"el-upload__text"},[t._v("Drag the file here, or"),n("em",[t._v(" click upload")])])])],1),n("el-col",{staticStyle:{position:"relative"},attrs:{span:16}},[n("div",{staticStyle:{height:"800px",overflow:"auto",border:"1px solid",display:"block"}},[n("div",{staticStyle:{"padding-top":"10px",display:"flex"}},[n("div",[n("tree-node",{attrs:{data:t.showTree}})],1)]),n("el-button",{staticStyle:{position:"absolute",left:"15px",bottom:"25px"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:t.clearTree}})],1)]),n("el-col",{attrs:{span:8}},[n("div",{staticStyle:{height:"800px",display:"flex","flex-direction":"column"}},[n("div",{staticStyle:{height:"50%",width:"100%",overflow:"auto",border:"1px solid"}},[n("div",{staticClass:"box"},[t._l(t.treeNode,(function(e,r){return[e.isLeaf?t._e():[n("div",{key:r,staticClass:"item",on:{mousedown:function(n){return t.highLight(e)}}},[n("el-tag",{attrs:{type:"info",closable:"",effect:e.isFocus?"dark":"light"},on:{close:function(n){return t.handleClose(e)}}},[t._v(" ("+t._s(e.property)+","+t._s(e.start)+","+t._s(e.end)+") ")])],1)]]})),n("div",{staticClass:"addItem"},[t.inputVisible?n("div",{staticStyle:{display:"flex"}},[n("el-input",{ref:"saveTagInput",staticStyle:{"max-width":"150px"},attrs:{size:"small"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),n("el-button-group",[n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-check"},on:{click:t.handleInputConfirm}}),n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-close"},on:{click:t.cancelAdd}})],1)],1):n("el-button",{attrs:{size:"small",type:"info"},on:{click:t.showInput}},[t._v("+ New Tag ")])],1)],2)]),n("div",{staticStyle:{height:"10%",width:"100%",border:"1px solid"}},[n("div",{staticStyle:{height:"100%",display:"flex","align-items":"center","margin-left":"5px","margin-right":"5px"}},[n("el-button-group",{staticStyle:{"margin-right":"5px"}},[n("el-button",{attrs:{type:"primary",disabled:t.stack.length<1},on:{click:t.undo}},[t._v("Undo")]),n("el-button",{attrs:{type:"primary",disabled:t.stack.length<1},on:{click:t.undoAll}},[t._v("Undo all")])],1),n("el-tag",{staticStyle:{"flex-grow":"1"}},[t._v("F1: "+t._s(t.score["f1"].toFixed(4)))]),n("el-tag",{staticStyle:{"flex-grow":"1"}},[t._v("LR: "+t._s(t.score["LR"].toFixed(4)))]),n("el-tag",{staticStyle:{"flex-grow":"1"}},[t._v("LP: "+t._s(t.score["LP"].toFixed(4)))])],1)]),n("div",{staticStyle:{height:"50%",width:"100%",overflow:"auto",border:"1px solid"}},[n("div",{staticClass:"box"},[t._l(t.treeProperty,(function(e,r){return[e.isLeaf?[n("div",{key:r,staticClass:"item"},[n("el-input",{on:{blur:t.propertyChange},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.propertyChange(e)}},model:{value:e.property,callback:function(n){t.$set(e,"property",n)},expression:"item.property"}},[n("template",{slot:"prepend"},[t._v(t._s(e.text))])],2)],1)]:t._e()]}))],2)])])])],1)],1)},f=[],v=(n("b0c0"),n("ac1f"),n("25f0"),n("466d"),n("1276"),n("dede")),y=n("6fd4"),g=n("21a6"),m=n.n(g),x={name:"home",components:{treeNode:y["a"]},data:function(){return{text:"",tree:new v["a"],oriTree:new v["a"],filename:"",treeNode:[],treeProperty:[],inputVisible:!1,inputValue:"(,,)",stack:[],isHidden:!1}},computed:{showTree:function(){return this.isHidden?new v["a"]:this.tree},score:function(){return this.tree.score(this.oriTree)}},methods:{updateTree:function(){this.treeNode=this.tree.getAllNodeBySpan(),this.treeProperty=this.tree.getAllNodeByDepth(),this.text=this.tree.toString()},parseText:function(){try{this.tree=v["a"].parse(this.text),this.oriTree=v["a"].parse(this.text),this.stack=[],this.updateTree()}catch(t){alert(t.message)}},undo:function(){this.text=this.stack.pop(),this.tree=v["a"].parse(this.text),this.updateTree()},undoAll:function(){this.text=this.stack[0],this.tree=v["a"].parse(this.text),this.stack=[],this.updateTree()},clearTree:function(){this.isHidden=!this.isHidden},WriteFile:function(){var t=new Blob([this.tree.toString()],{type:"text/plain;charset=utf-8"});m()(t,this.filename+"_patch")},handleInputConfirm:function(){if(null!==this.inputValue.match(/\(\w+,\d+,\d+\)/g)){var t=this.inputValue.replaceAll(/[\s\\)(]/g,"").split(",");try{var e=this.tree.toString();this.tree.addNode(t[0],parseInt(t[1],10),parseInt(t[2],10)),this.stack.push(e)}catch(n){alert(n.message)}this.updateTree()}else alert("格式错误！");this.inputVisible=!1,this.inputValue="(,,)"},cancelAdd:function(){this.inputVisible=!1,this.inputValue="(,,)"},propertyChange:function(){this.tree.toString()!==this.text&&this.stack.push(this.text),this.updateTree()},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick((function(){t.$refs.saveTagInput.$refs.input.focus()}))},handleClose:function(t){var e=this.tree.toString();this.tree.delNode(t),this.stack.push(e),this.updateTree()},uploadFile:function(t){var e=this,n=new FileReader;return n.onload=function(){e.text=n.result,e.filename=t.name,e.parseText()},n.readAsText(t),!1},highLight:function(t){this.tree.unFocusAll(),t.isFocus=!0}}},b=x,k=(n("cccb"),Object(o["a"])(b,p,f,!1,null,null,null)),_=k.exports;r["default"].use(h["a"]);var w=[{path:"/",name:"Home",component:_},{path:"/compare",name:"Compare",component:function(){return n.e("about").then(n.bind(null,"1405"))}}],L=new h["a"]({routes:w}),S=L;r["default"].config.productionTip=!1,new r["default"]({router:S,render:function(t){return t(c)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"5ced":function(t,e,n){},"6fd4":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node",style:"background:"+(t.data.isFocus?"Khaki":"cornsilk"),on:{mousedown:function(e){return t.isHighLight(e,t.data)}}},[t._v(" "+t._s(t.data.text)+" "),n("div",{staticClass:"property"},[t._v(t._s(t.data.property))]),t.data.isLeaf?t._e():[n("div",{staticStyle:{display:"flex"}},[t._l(t.data.child,(function(e,r){return[n("div",{key:r,style:"flex-grow:"+e.textLen},[n("tree-node",{attrs:{data:e,"is-click":t.isClick}})],1)]}))],2)]],2)},i=[],a=n("dede"),o={name:"treeNode",props:{data:{type:a["a"]},isClick:{type:Boolean,default:!0}},methods:{isHighLight:function(t,e){this.isClick&&(t.stopPropagation(),e.unFocusAll(),e.isFocus=!0)}}},s=o,l=(n("04e4"),n("2877")),c=Object(l["a"])(s,r,i,!1,null,"77e28310",null);e["a"]=c.exports},"9c0c":function(t,e,n){},c69f:function(t,e,n){},cccb:function(t,e,n){"use strict";n("5ced")},dede:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));n("99af"),n("4de4"),n("7db0"),n("4160"),n("c975"),n("d81d"),n("13d5"),n("fb6a"),n("a434"),n("b680"),n("b64b"),n("d3b7"),n("ac1f"),n("25f0"),n("6062"),n("3ca3"),n("5319"),n("159b"),n("ddb0");var r=n("5530"),i=n("2909"),a=n("d4ec"),o=n("bee2");function s(t){return t.replace(/(^\s*)|(\s*$)/g,"")}function l(t){return-1===t.indexOf("(")&&-1===t.indexOf(")")}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(l(t))return t;var n=e;if("("!==t[e])throw new Error("parse Error!");for(var r=1,i=n+1;i<t.length;i++)if(")"===t[i]?r--:"("===t[i]&&r++,0===r)return t.substring(n,i+1)}function u(t,e){var n={};return t.forEach((function(t){var r=JSON.stringify(e(t));n[r]=n[r]||[],n[r].push(t)})),Object.keys(n).map((function(t){return n[t]}))}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=[],r=0;for(r=0;r<t.length;r++)if(-1!==e.indexOf(t[r])){n.push(t.substring(1,r));break}for(var i=r+1;i<t.length;i++)if(-1===e.indexOf(t[i])){n.push(t.substring(i,t.length-1));break}return n}var h=0,p=function(){function t(){Object(a["a"])(this,t),this.property="",this.second="",this.isLeaf=!1,this.text="",this.textLen=0,this.start=-1,this.end=-1,this.child=[],this.father=null,this.isFocus=!1}return Object(o["a"])(t,[{key:"_initText",value:function(){return""===this.text&&(this.text=s(this.child.map((function(t){return t._initText()})).reduce((function(t,e){return t+" "+e})))),this.isLeaf&&(this.text+="("+this.start+")"),this.text}},{key:"_initIndex",value:function(){if(!this.isLeaf){this.start=this.child[0]._initIndex()[0],this.end=this.child[this.child.length-1]._initIndex()[1],this.textLen=this.end-this.start+1;for(var t=1;t<this.child.length-1;t++)this.child[t]._initIndex()}return[this.start,this.end]}},{key:"getAllNodeByDepth",value:function(){var t=[this];return this.isLeaf||this.child.map((function(t){return t.getAllNodeByDepth()})).forEach((function(e){t=t.concat(e)})),t}},{key:"getAllNodeBySpan",value:function(){for(var t=[this],e=0;e<t.length;e++)this.isLeaf||(t=t.concat(t[e].child));return t}},{key:"delNode",value:function(t){var e,n=t.father;(e=n.child).splice.apply(e,[n.child.indexOf(t),1].concat(Object(i["a"])(t.child))),t.child.forEach((function(t){return t.father=n}))}},{key:"addNode",value:function(e,n,r){var i=new t;if(i.property=e,i.start=n,i.end=r,n>r)throw new Error("不能在这里添加节点");i.isLeaf=!1;var a=-1,o=-1,l=this.getAllNodeBySpan().find((function(t){for(var e=!1,i=!1,s=0;s<t.child.length;s++)if(t.child[s].start===n&&(e=!0,a=s),t.child[s].end===r&&(i=!0,o=s),e&&i)return!0;return e&&i}));if(!(l instanceof t))throw new Error("不能在这里添加节点");var c=l.child.slice(a,o+1);l.child.splice(a,o-a+1,i),i.father=c[0].father,i.child=c,i.child.forEach((function(t){t.father=i,i.text+=t.text+" ",i.textLen=i.end-i.start+1,i.second+=t.second+" "})),i.text=s(i.text),i.second=s(i.second)}},{key:"_unFocusAll",value:function(){this.getAllNodeBySpan().forEach((function(t){t.isFocus=!1}))}},{key:"unFocusAll",value:function(){var t=this;while(null!==t.father)t=t.father;t._unFocusAll()}},{key:"toString",value:function(){var t="("+this.property+" ";if(this.isLeaf)t+=this.second;else for(var e=0;e<this.child.length;e++)t+=this.child[e].toString()+" ";return t=s(t),t+=")",t}},{key:"compare",value:function(t){return this.property===t.property&&this.start===t.start&&this.end===t.end}},{key:"getCmpNode",value:function(){var t=this.getAllNodeByDepth();return t.filter((function(t){return!(null==t.father||t.isLeaf)}))}},{key:"getSpanList",value:function(){var t=this.getAllNodeByDepth();return t.filter((function(t){return!(null==t.father||t.isLeaf)})).map((function(t){return"("+t.property+","+t.start+","+t.end+")"}))}},{key:"score",value:function(t){var e=this.getSpanList(),n=t.getSpanList(),r=e.filter((function(t){return new Set(n).has(t)})),i=r.length,a=e.length,o=n.length,s=a>0?i/a:0,l=o>0?i/o:0,c=s+l>0?2*s*l/(s+l):0;return{LP:s,LR:l,f1:c}}},{key:"calLPLRF1",value:function(t,e){var n=t.map((function(t){return"("+t.property+","+t.start+","+t.end+")"})),r=e.map((function(t){return"("+t.property+","+t.start+","+t.end+")"})),i=n.filter((function(t){return new Set(r).has(t)})),a=i.length,o=n.length,s=r.length,l=o>0?a/o:0,c=s>0?a/s:0,u=l+c>0?2*l*c/(l+c):0;return{LP:l,LR:c,f1:u}}},{key:"report",value:function(t){var e=this,n=this.getCmpNode(),i=t.getCmpNode(),a=u(n,(function(t){return t.property})),o=u(i,(function(t){return t.property})),s=[];a.forEach((function(t){var n=[];o.forEach((function(e){e[0].property===t[0].property&&(n=e)})),s.push(Object(r["a"])({name:t[0].property,support:t.length},e.calLPLRF1(n,t)))}));var l=Object(r["a"])({name:"micro avg",support:n.length},t.score(this)),c=s.reduce((function(t,e){return t["LP"]=t["LP"]+e["LP"]*e["support"]/n.length,t["LR"]=t["LR"]+e["LR"]*e["support"]/n.length,t["f1"]=t["f1"]+e["f1"]*e["support"]/n.length,t}),{LP:0,LR:0,f1:0});return s.push(l),s.push(Object(r["a"])({name:"macro avg",support:n.length},c)),s.forEach((function(t){t["LP"]=t["LP"].toFixed(4),t["LR"]=t["LR"].toFixed(4),t["f1"]=t["f1"].toFixed(4)})),s}}],[{key:"_parse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";e=c(s(e));var r=d(e,n),i=new t;if(i.property=r[0],i.second=r[1],i.isLeaf=l(i.second),l(i.second))i.text=i.second,i.start=h,i.end=h,i.textLen=1,h++;else{var a=0;while(a!==i.second.length){var o=c(i.second,a);i.child.push(t._parse(o,n)),a+=o.length;while(-1!==n.indexOf(i.second[a]))a++}i.child.forEach((function(t){return t.father=i}))}return i}},{key:"parse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";h=0;var r=t._parse(e,n);return r._initText(),r._initIndex(),r}}]),t}()}});
//# sourceMappingURL=app.a5b3762c.js.map